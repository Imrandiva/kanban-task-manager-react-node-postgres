{"ast":null,"code":"var _jsxFileName = \"/Users/imrandiva/react-kanban-board-challenge-master/client/src/components/kanban-board/index.js\";\nimport React, { Component } from \"react\";\nimport \"./index.css\";\nimport InfiniteCalendar from 'react-infinite-calendar';\nimport 'react-infinite-calendar/styles.css';\nexport default class KanbanBoard extends Component {\n  constructor() {\n    super(); // Each task is uniquely identified by its name. \n    // Therefore, when you perform any operation on tasks, make sure you pick tasks by names (primary key) instead of any kind of index or any other attribute.\n\n    this.onClick = name => {\n      // On click we change our state – this will trigger our `render` method\n      if (this.state.showForm) {\n        this.setState({\n          showForm: false\n        });\n      } else {\n        console.log(name);\n        this.setState({\n          showForm: true,\n          currentName: name\n        });\n      }\n    };\n\n    this.renderForm = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mt-50 layout-column\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 8\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.onFormSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }\n      }, \"What to change\"), /*#__PURE__*/React.createElement(\"select\", {\n        value: this.state.chosenColumn,\n        onChange: this.handleEdit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"task_name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }\n      }, \"Task name\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"course\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }\n      }, \"Course\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"due_date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }\n      }, \"Due date\")))), /*#__PURE__*/React.createElement(\"input\", {\n        value: this.state.changeTask,\n        onChange: this.onEditTask,\n        id: \"create-task-input\",\n        type: \"text\",\n        className: \"large\",\n        placeholder: \"New task name\",\n        \"data-testid\": \"create-task-input\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 10\n        }\n      }), this.state.chosenColumn, this.state.changeTask, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.confirmUpdates,\n        type: \"submit\",\n        className: \"addthetask\",\n        \"data-testid\": \"update-task-button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 10\n        }\n      }, \"Confirm changes\"));\n    };\n\n    this.confirmUpdates = () => {\n      let idToUpdate;\n      let name = this.state.currentName;\n      let _tasks = this.state.tasks;\n\n      for (let i = 0; i < Object.keys(_tasks).length; i++) {\n        if (_tasks[i].name = name) {\n          idToUpdate = _tasks[i].tid;\n\n          if (this.state.chosenColumn == 'task_name') {\n            _tasks.push({\n              id: idToUpdate,\n              name: this.state.changeTask,\n              course: _tasks[i].course,\n              chosenDate: _tasks[i].chosenDate,\n              stage: _tasks[i].stage\n            });\n          } else if (this.state.chosenColumn == 'course') {\n            _tasks.push({\n              id: idToUpdate,\n              name: _tasks[i].name,\n              course: this.state.changeTask,\n              chosenDate: _tasks[i].chosenDate,\n              stage: _tasks[i].stage\n            });\n          } else {\n            _tasks.push({\n              id: idToUpdate,\n              name: _tasks[i].name,\n              course: _tasks[i].course,\n              chosenDate: this.state.changeTask,\n              stage: _tasks[i].stage\n            });\n          }\n\n          this.updateTask(idToUpdate, this.state.chosenColumn, this.state.changeTask);\n          this.saveProgress(_tasks[i].id, _tasks[i].stage);\n          this.setState({\n            tasks: _tasks,\n            chosenColumn: '',\n            changeTask: 'task_name',\n            showForm: false\n          });\n\n          _tasks.splice(i, 1);\n        }\n      }\n    };\n\n    this.onEditTask = e => {\n      this.setState({\n        changeTask: e.target.value\n      });\n    };\n\n    this.onInputChange = e => {\n      this.setState({\n        inputValue: e.target.value\n      });\n    };\n\n    this.onCourseInputChange = e => {\n      this.setState({\n        courseInput: e.target.value\n      });\n    };\n\n    this.addTask = () => {\n      if (this.state.inputValue) {\n        const _tasks = this.state.tasks;\n        this.createMerchant(this.state.inputValue, this.state.courseInput, this.state.dateInput);\n\n        _tasks.push({\n          name: this.state.inputValue,\n          course: this.state.courseInput,\n          chosenDate: this.state.dateInput,\n          stage: 0\n        });\n\n        this.setState({\n          tasks: _tasks,\n          inputValue: ''\n        });\n        this.setState({\n          tasks: _tasks,\n          courseInput: ''\n        });\n        this.setState({\n          tasks: _tasks,\n          dateInput: ''\n        });\n      }\n    };\n\n    this.enterAddTask = e => {\n      if (e.key === 'Enter') {\n        this.addTask();\n      }\n    };\n\n    this.back = name => {\n      let _tasks = this.state.tasks;\n      _tasks = _tasks.map(task => {\n        if (task.name == name) return {\n          tid: task.tid,\n          name: task.name,\n          course: task.course,\n          chosenDate: task.chosenDate,\n          stage: task.stage == 0 ? 0 : task.stage - 1\n        };else return task;\n      });\n      this.setState({\n        tasks: _tasks\n      });\n    };\n\n    this.forward = name => {\n      let _tasks = this.state.tasks;\n      _tasks = _tasks.map(task => {\n        if (task.name == name) return {\n          tid: task.tid,\n          name: task.name,\n          course: task.course,\n          chosenDate: task.chosenDate,\n          stage: task.stage == 3 ? 3 : task.stage + 1\n        };else return task;\n      });\n      this.setState({\n        tasks: _tasks\n      });\n    };\n\n    this.remove = name => {\n      // Find id where name is part of id\n      let _tasks = this.state.tasks;\n      let idToDelete = 0;\n\n      for (let i = 0; i < Object.keys(_tasks).length; i++) {\n        if (_tasks[i].name = name) {\n          idToDelete = _tasks[i].tid;\n          console.log(_tasks[i].name);\n          console.log(_tasks[i].tid);\n\n          _tasks.splice(i, 1);\n\n          this.deleteMerchant(idToDelete);\n          this.setState({\n            tasks: _tasks\n          });\n        }\n      }\n\n      ;\n    };\n\n    this.saveProgress = () => {\n      let _tasks = this.state.tasks;\n\n      for (let i = 0; i < Object.keys(_tasks).length; i++) {\n        this.updateStage(_tasks[i].tid, _tasks[i].stage);\n        console.log(_tasks[i].tid);\n        console.log(_tasks[i].name);\n      }\n\n      ;\n      this.setState({\n        tasks: _tasks\n      });\n    };\n\n    this.state = {\n      tasks: [],\n      inputValue: '',\n      courseInput: '',\n      dateInput: '',\n      calendarDate: new Date(),\n      count: 0,\n      changeTask: '',\n      showForm: false,\n      chosenColumn: 'task_name',\n      currentName: ''\n    };\n    this.stagesNames = ['Backlog', 'To Do', 'Ongoing', 'Review'];\n    this.handleChange = this.handleChange.bind(this);\n    this.onFormSubmit = this.onFormSubmit.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.getMerchant();\n  }\n\n  async getMerchant() {\n    const datafiles = [];\n    await fetch('http://localhost:3001').then(response => {\n      // alert(response.tid);\n      return response.text();\n    }).then(data => {\n      const obj = JSON.parse(data);\n\n      for (let i = 0; i < Object.keys(obj).length; i++) {\n        datafiles.push({\n          tid: obj[i].tid,\n          name: obj[i].task_name,\n          course: obj[i].course,\n          chosenDate: obj[i].due_date,\n          stage: obj[i].stage\n        }); // alert(obj[i].tid);\n      }\n\n      ;\n      this.setState({\n        tasks: datafiles\n      });\n    });\n  }\n\n  async createMerchant(name, course, due_date) {\n    // let name = prompt('Enter task name');\n    // let course = prompt('Enter task course');\n    // let due_date = prompt('Enter task due date');\n    const stage = 0;\n    await fetch('http://localhost:3001/tasks', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name,\n        course,\n        due_date,\n        stage\n      })\n    }).then(response => {\n      return response.text();\n    });\n    this.setState({\n      tasks: this.state.tasks\n    });\n    window.location.reload(); //     .then(data => {\n    //       alert(data);\n    //       this.getMerchant();\n    //     });\n  }\n\n  async updateStage(id, stage) {\n    await fetch(`http://localhost:3001/tasks/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id,\n        stage\n      })\n    }).then(response => {\n      return response.text();\n    }); // .then(data => {\n    //   // alert(data);\n    //   this.getMerchant();\n    // });\n\n    this.setState({\n      tasks: this.state.tasks\n    }); // window.location.reload();\n  }\n\n  async updateTask(id, column, change) {\n    await fetch(`http://localhost:3001/tasks/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id,\n        column,\n        change\n      })\n    }).then(response => {\n      return response.text();\n    }); // .then(data => {\n    //   // alert(data);\n    //   this.getMerchant();\n    // });\n\n    this.setState({\n      tasks: this.state.tasks\n    }); // window.location.reload();\n  }\n\n  async deleteMerchant(id) {\n    await fetch(`http://localhost:3001/tasks/${id}`, {\n      method: 'DELETE'\n    }).then(response => {\n      return response.text();\n    }).then(data => {\n      // alert(data);\n      this.getMerchant();\n    }); // window.location.reload();\n  }\n\n  handleChange(date) {\n    this.setState({\n      calendarDate: date.toISOString().split('T')[0],\n      dateInput: date.toISOString().split('T')[0].toString()\n    });\n  }\n\n  handleEdit(event) {\n    this.setState({\n      chosenColumn: event.target.value\n    });\n  }\n\n  onFormSubmit(e) {\n    e.preventDefault();\n    console.log(this.state.chosenDate);\n  }\n\n  render() {\n    const {\n      tasks\n    } = this.state;\n    let stagesTasks = [];\n\n    for (let i = 0; i < this.stagesNames.length; i++) {\n      stagesTasks.push([]);\n    }\n\n    for (let task of tasks) {\n      const stageId = task.stage;\n      stagesTasks[stageId].push(task);\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt-20 layout-column justify-content-center align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"deadlineCal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(InfiniteCalendar, {\n      selected: this.state.calendarDate,\n      onSelect: this.handleChange,\n      locale: {\n        weekStartsOn: 1\n      },\n      displayOptions: {\n        layout: 'landscape'\n      },\n      width: 800,\n      height: 200,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"mt-50 layout-row align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.inputValue,\n      onChange: this.onInputChange,\n      onKeyDown: this.enterAddTask,\n      id: \"create-task-input\",\n      type: \"text\",\n      className: \"large\",\n      placeholder: \"New task name\",\n      \"data-testid\": \"create-task-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.courseInput,\n      onChange: this.onCourseInputChange,\n      onKeyDown: this.enterAddTask,\n      id: \"create-task-input\",\n      type: \"text\",\n      className: \"large\",\n      placeholder: \"Course code\",\n      \"data-testid\": \"create-task-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.dateInput,\n      onKeyDown: this.enterAddTask,\n      id: \"create-task-input\",\n      type: \"text\",\n      className: \"large\",\n      placeholder: \"Deadline date\",\n      \"data-testid\": \"create-task-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.addTask,\n      type: \"submit\",\n      className: \"addthetask\",\n      \"data-testid\": \"create-task-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 11\n      }\n    }, \"Create task\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.saveProgress,\n      type: \"submit\",\n      className: \"addthetask\",\n      \"data-testid\": \"create-task-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }\n    }, \"Save progress\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt-50 layout-row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }\n    }, stagesTasks.map((tasks, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card outlined ml-20 mt-0\",\n        key: `${i}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 19\n        }\n      }, this.stagesNames[i]), /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"styled mt-50\",\n        \"data-testid\": `stage-${i}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 19\n        }\n      }, tasks.map((task, index) => {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          className: \"slide-up-fade-in\",\n          key: `${i}${index}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 30\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"layout-column justify-content-between align-items-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"section\", {\n          className: \"mt-50 layout-column align-items-center justify-content-center \",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 27\n          }\n        }, task.name), /*#__PURE__*/React.createElement(\"section\", {\n          className: \"mt-50 layout-row align-items-center justify-content-center \",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"taskIcon\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 27\n          }\n        }, task.course), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"taskIcon2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 27\n          }\n        }, task.chosenDate.split(\"T\")[0]))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"icons\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: () => this.onClick(task.name),\n          className: \"icon-only small mx-2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"material-icons\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 31\n          }\n        }, \"settings\")), this.state.showForm && this.renderForm(), /*#__PURE__*/React.createElement(\"button\", {\n          onClick: () => this.back(task.name),\n          className: \"icon-only small mx-2\",\n          disabled: task.stage == 0,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"material-icons\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 31\n          }\n        }, \"arrow_back\")), /*#__PURE__*/React.createElement(\"button\", {\n          onClick: () => this.forward(task.name),\n          className: \"icon-only small mx-2\",\n          disabled: task.stage == 3,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"material-icons\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 31\n          }\n        }, \"arrow_forward\")), /*#__PURE__*/React.createElement(\"button\", {\n          onClick: () => this.remove(task.name),\n          className: \"icon-only medium mx-2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"material-icons\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 31\n          }\n        }, \"checkmark\")))));\n      }))));\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/imrandiva/react-kanban-board-challenge-master/client/src/components/kanban-board/index.js"],"names":["React","Component","InfiniteCalendar","KanbanBoard","constructor","onClick","name","state","showForm","setState","console","log","currentName","renderForm","onFormSubmit","chosenColumn","handleEdit","changeTask","onEditTask","confirmUpdates","idToUpdate","_tasks","tasks","i","Object","keys","length","tid","push","id","course","chosenDate","stage","updateTask","saveProgress","splice","e","target","value","onInputChange","inputValue","onCourseInputChange","courseInput","addTask","createMerchant","dateInput","enterAddTask","key","back","map","task","forward","remove","idToDelete","deleteMerchant","updateStage","calendarDate","Date","count","stagesNames","handleChange","bind","getMerchant","datafiles","fetch","then","response","text","data","obj","JSON","parse","task_name","due_date","method","headers","body","stringify","window","location","reload","column","change","date","toISOString","split","toString","event","preventDefault","render","stagesTasks","stageId","weekStartsOn","layout","index"],"mappings":"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","sourcesContent":["import React, {Component } from \"react\";\nimport \"./index.css\";\nimport InfiniteCalendar from 'react-infinite-calendar';\nimport 'react-infinite-calendar/styles.css';\n\n\n\n\n\nexport default class KanbanBoard extends Component {\n  constructor() {\n    super();\n    // Each task is uniquely identified by its name. \n    // Therefore, when you perform any operation on tasks, make sure you pick tasks by names (primary key) instead of any kind of index or any other attribute.\n\n    this.state = {\n      \n      tasks: [],\n      inputValue: '',\n      courseInput: '',\n      dateInput: '',\n      calendarDate: new Date(),\n      count: 0,\n\n      changeTask: '', \n      showForm: false,\n      chosenColumn: 'task_name',\n      currentName: ''\n      \n\n      \n    };\n    this.stagesNames = ['Backlog', 'To Do', 'Ongoing','Review'];\n    this.handleChange = this.handleChange.bind(this);\n    this.onFormSubmit = this.onFormSubmit.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n\n    this.getMerchant();\n    \n   \n    \n  }\n\n  async getMerchant() {\n    const datafiles = [];\n    await fetch('http://localhost:3001')\n      .then(response => {\n        // alert(response.tid);\n        return response.text();\n      })\n      .then(data => { \n        const obj = JSON.parse(data);\n        for (let i =0; i < Object.keys(obj).length; i++) {\n            \n          datafiles.push({\n            tid: obj[i].tid,\n            name: obj[i].task_name,\n            course: obj[i].course,\n            chosenDate: obj[i].due_date,\n            stage: obj[i].stage,\n            \n\n          }); \n        // alert(obj[i].tid);\n      \n          };\n\n          this.setState({tasks: datafiles});\n\n      });\n  }\n\n  \n\n  \n\n  async createMerchant(name, course, due_date) {\n    // let name = prompt('Enter task name');\n    // let course = prompt('Enter task course');\n    // let due_date = prompt('Enter task due date');\n    const stage = 0;\n    await fetch('http://localhost:3001/tasks', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({name, course, due_date,stage}),\n    })\n      .then(response => {\n        return response.text();\n      })\n      this.setState({ tasks: this.state.tasks });\n\n      window.location.reload();\n    \n      \n      \n  //     .then(data => {\n  //       alert(data);\n  //       this.getMerchant();\n  //     });\n  }\n  async updateStage(id, stage) {\n    await fetch(`http://localhost:3001/tasks/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({id, stage}),\n    })\n      .then(response => {\n        return response.text();\n      })\n      // .then(data => {\n      //   // alert(data);\n      //   this.getMerchant();\n      // });\n      this.setState({ tasks: this.state.tasks });\n      \n      \n\n      // window.location.reload();\n  }\n  async updateTask(id, column, change) {    \n    await fetch(`http://localhost:3001/tasks/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({id, column, change}),\n    })\n      .then(response => {\n        return response.text();\n      })\n      // .then(data => {\n      //   // alert(data);\n      //   this.getMerchant();\n      // });\n      this.setState({ tasks: this.state.tasks });\n      \n      \n\n      // window.location.reload();\n  }\n\n\n  onClick = (name) => {\n    // On click we change our state – this will trigger our `render` method\n    if(this.state.showForm){\n      this.setState({ showForm: false });\n    }\n    else {\n      console.log(name);\n    this.setState({ showForm: true, currentName: name });\n    }\n}\n\nrenderForm = () => {\n   return (\n       <div className=\"mt-50 layout-column\"> \n        <form onSubmit={this.onFormSubmit}>\n        <label>\n          <p>What to change</p>\n          <select value={this.state.chosenColumn} onChange={this.handleEdit}>\n            <option value=\"task_name\">Task name</option>\n            <option value=\"course\">Course</option>\n            <option value=\"due_date\">Due date</option> \n          </select>\n        </label>\n      </form>\n     \n         <input value={this.state.changeTask} onChange={this.onEditTask} id=\"create-task-input\" type=\"text\" className=\"large\" placeholder=\"New task name\" data-testid=\"create-task-input\" />\n         {this.state.chosenColumn} \n         {this.state.changeTask} \n         <button onClick={this.confirmUpdates} type=\"submit\" className=\"addthetask\" data-testid=\"update-task-button\">Confirm changes</button>\n\n      </div>\n   );\n}\n\n\nconfirmUpdates = () => {\n  let idToUpdate;\n  let name = this.state.currentName;\n  let _tasks = this.state.tasks;\n  for (let i =0; i < Object.keys(_tasks).length; i++) {\n    if (_tasks[i].name = name) {\n      idToUpdate = _tasks[i].tid;\n      if (this.state.chosenColumn == 'task_name'){\n        _tasks.push({id: idToUpdate, name: this.state.changeTask, course: _tasks[i].course, chosenDate:  _tasks[i].chosenDate,  stage:  _tasks[i].stage });\n      }\n      else if (this.state.chosenColumn == 'course') {\n        _tasks.push({id: idToUpdate, name: _tasks[i].name, course: this.state.changeTask, chosenDate:  _tasks[i].chosenDate,  stage:  _tasks[i].stage });\n      }\n      else {\n        _tasks.push({id: idToUpdate, name: _tasks[i].name, course: _tasks[i].course, chosenDate: this.state.changeTask, stage:  _tasks[i].stage });\n      }\n\n      this.updateTask(idToUpdate, this.state.chosenColumn, this.state.changeTask);\n      this.saveProgress(_tasks[i].id, _tasks[i].stage);\n      this.setState({ tasks: _tasks, chosenColumn:'', changeTask: 'task_name', showForm: false });  \n      _tasks.splice(i, 1);\n    }\n  }\n}\n    async deleteMerchant(id) {\n      \n    await fetch(`http://localhost:3001/tasks/${id}`, {\n      method: 'DELETE',\n    })\n      .then(response => {\n        return response.text();\n      })\n      .then(data => {\n        // alert(data);\n        this.getMerchant();\n      });\n\n      // window.location.reload();\n  }\n\n  handleChange(date) {\n    this.setState({\n      calendarDate: date.toISOString().split('T')[0],\n      dateInput: date.toISOString().split('T')[0].toString()\n    })\n     \n  }\n\n  handleEdit(event) {\n    this.setState({chosenColumn: event.target.value});\n  }\n\n  onFormSubmit(e) {\n    e.preventDefault();\n    console.log(this.state.chosenDate)\n    \n  }\n  \n  onEditTask = (e) => {\n    this.setState({\n      changeTask: e.target.value\n    })\n\n  }\n  onInputChange = (e) => {\n    this.setState({\n      inputValue: e.target.value\n    })\n  }\n  \n  onCourseInputChange = (e) => {\n    this.setState({\n      courseInput: e.target.value\n    })\n  }\n  addTask = () => {\n    if (this.state.inputValue) {\n      const _tasks = this.state.tasks;\n      this.createMerchant(this.state.inputValue, this.state.courseInput, this.state.dateInput);\n      _tasks.push({ name: this.state.inputValue, course: this.state.courseInput, chosenDate: this.state.dateInput,  stage: 0 });\n     \n      \n      this.setState({ tasks: _tasks, inputValue:'' });\n      this.setState({ tasks: _tasks, courseInput:'' });\n      this.setState({ tasks: _tasks, dateInput:'' });\n\n   \n      \n    }\n    \n  }\n\n  enterAddTask = (e) => {\n    if (e.key === 'Enter') {\n      this.addTask()\n    }\n  }\n  back = (name) => {\n    let _tasks = this.state.tasks;\n    _tasks = _tasks.map((task) => {\n      if (task.name == name) return {tid: task.tid, name: task.name, course: task.course,chosenDate: task.chosenDate, stage: task.stage == 0 ? 0 : task.stage -1  };\n      else return task;\n    });\n\n    this.setState({ tasks: _tasks });\n  }\n\n  forward = (name) => {\n    let _tasks = this.state.tasks;\n    _tasks = _tasks.map((task) => {\n      if (task.name == name) return { tid: task.tid, name: task.name, course: task.course,chosenDate: task.chosenDate, stage: task.stage == 3 ? 3 : task.stage +1  };\n      else return task;\n    });\n\n    this.setState({ tasks: _tasks });\n  }\n\n  remove = (name) => {\n     // Find id where name is part of id\n     let _tasks = this.state.tasks;\n     let idToDelete = 0;\n     for (let i =0; i < Object.keys(_tasks).length; i++) {\n      if (_tasks[i].name = name) {\n        idToDelete = _tasks[i].tid;\n        console.log(_tasks[i].name);\n        console.log(_tasks[i].tid);\n        _tasks.splice(i, 1);\n         this.deleteMerchant(idToDelete);\n         this.setState({ tasks: _tasks });\n         \n      }\n     \n   };\n   \n    \n  }\n  \n\n  saveProgress = () => {\n    let _tasks = this.state.tasks;\n\n     for (let i =0; i < Object.keys(_tasks).length; i++) {\n        this.updateStage(_tasks[i].tid, _tasks[i].stage);\n        console.log(_tasks[i].tid);\n        console.log(_tasks[i].name);\n\n      };\n      this.setState({ tasks: _tasks });\n  \n\n\n  }\n\n  render() {\n    const { tasks } = this.state;\n    let stagesTasks = [];\n    for (let i = 0; i < this.stagesNames.length; i++) {\n      stagesTasks.push([]);\n    }\n    for (let task of tasks) {\n      const stageId = task.stage;\n      stagesTasks[stageId].push(task);\n      \n    }\n    \n    \n   \n    return (\n      \n      <div className=\"mt-20 layout-column justify-content-center align-items-center\">\n        <section className=\"deadlineCal\">\n          <InfiniteCalendar\n\n            selected={ this.state.calendarDate }\n            onSelect={ this.handleChange }\n            locale={{\n            weekStartsOn: 1}}\n            displayOptions={{\n            layout: 'landscape'\n            }}\n            width={800}\n            height={200}\n          />\n         </section>\n         <section className=\"mt-50 layout-row align-items-center justify-content-center\">\n          <input value={this.state.inputValue} onChange={this.onInputChange} onKeyDown={this.enterAddTask} id=\"create-task-input\" type=\"text\" className=\"large\" placeholder=\"New task name\" data-testid=\"create-task-input\" />\n          <input value={this.state.courseInput} onChange={this.onCourseInputChange} onKeyDown={this.enterAddTask} id=\"create-task-input\" type=\"text\" className=\"large\" placeholder=\"Course code\" data-testid=\"create-task-input\" />\n          <input value={this.state.dateInput} onKeyDown={this.enterAddTask} id=\"create-task-input\" type=\"text\" className=\"large\" placeholder=\"Deadline date\" data-testid=\"create-task-input\" />\n\n        \n          <button onClick={this.addTask} type=\"submit\" className=\"addthetask\" data-testid=\"create-task-button\">Create task</button>\n          <button onClick={this.saveProgress} type=\"submit\" className=\"addthetask\" data-testid=\"create-task-button\">Save progress</button>\n  \n          {/* <button  onClick={this.getMerchant} type=\"submit\" className=\"save-progress\">Delete a task </button> */}\n        </section>\n        <div className=\"mt-50 layout-row\">\n          {stagesTasks.map((tasks, i) => {\n            return (\n              <div className=\"card outlined ml-20 mt-0\" key={`${i}`}>\n                <div className=\"card-text\">\n                  <h4>{this.stagesNames[i]}</h4>\n                  <ul className=\"styled mt-50\" data-testid={`stage-${i}`}>\n                    {tasks.map((task, index) => {\n                      return <li className=\"slide-up-fade-in\" key={`${i}${index}`}>\n                        <div className=\"layout-column justify-content-between align-items-center\">\n                        <section className=\"mt-50 layout-column align-items-center justify-content-center \">\n                          <span >{task.name}</span>\n                          <section className=\"mt-50 layout-row align-items-center justify-content-center \">\n                          <span className=\"taskIcon\">{task.course}</span>\n                          <span className=\"taskIcon2\">{task.chosenDate.split(\"T\")[0]}</span>\n                          </section>\n                        </section>\n                          <div className=\"icons\">\n                          <button onClick={() => this.onClick(task.name)} className=\"icon-only small mx-2\">\n                              <i className=\"material-icons\">settings</i>\n                            </button>\n                            {this.state.showForm && this.renderForm()}\n\n                            <button onClick={() => this.back(task.name)} className=\"icon-only small mx-2\"  disabled={task.stage == 0}>\n                              <i className=\"material-icons\">arrow_back</i>\n                            </button>\n                            <button onClick={() => this.forward(task.name)} className=\"icon-only small mx-2\"  disabled={task.stage == 3}>\n                              <i className=\"material-icons\">arrow_forward</i>\n                            </button>\n                            <button onClick={() => this.remove(task.name)} className=\"icon-only medium mx-2\">\n                              <i className=\"material-icons\">checkmark</i>\n                            </button>\n                          </div>\n                        </div>\n                      </li>\n                    })}\n                  </ul>\n                </div>\n              </div>\n            )\n          })}\n        </div>\n        \n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}